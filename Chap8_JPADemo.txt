index.html
---------
 <form action="AddUser" method="post">
       Name:<input type="text" name="uname"/>
       <br/>
       <br/>
       Password:<input type="password" name="pwd"/>
       <br/>
       <br/>
       <input type="submit" value="Add"/>
        </form>

addUser.java(Servlet)
---------------------

doPost
------
 	String name=request.getParameter("uname");
        String pwd=request.getParameter("pwd");
        EntityManagerFactory emfactory = Persistence.createEntityManagerFactory("User_JPA");
      
      EntityManager entitymanager = emfactory.createEntityManager();
      entitymanager.getTransaction().begin( );
      User user=new User();
      user.setName(name);
      user.setPwd(pwd);
      entitymanager.persist(user);
      entitymanager.getTransaction().commit();
      entitymanager.close();
      emfactory.close();
        processRequest(request, response);

User(POJO)
----------
@Entity
public class User {
    
    @Id
    String name;
    String pwd;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPwd() {
        return pwd;
    }

    public void setPwd(String pwd) {
        this.pwd = pwd;
    }
    
}

Persistance.xml(Autogenerated with @Entity)
---------------

 <persistence-unit name="User_JPA" transaction-type="RESOURCE_LOCAL">
   
         <class>com.niit.User</class>
    <properties>
    
         <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
         <property name="javax.persistence.jdbc.user" value="sa"/>
         <property name="javax.persistence.jdbc.password" value="niit"/>
         <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
          
    
    
    </properties>
  </persistence-unit>